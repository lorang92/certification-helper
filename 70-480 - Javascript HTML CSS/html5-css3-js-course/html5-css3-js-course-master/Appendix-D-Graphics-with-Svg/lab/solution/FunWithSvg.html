<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Fun with SVG!</title>

    <style>
        body {
            font-family: arial, verdana;
            font-size: 12px;
        }

        svg {
            display: block;
            border: 2px solid darkblue;
        }

        /* Whenever you hover over any element inside an <svg> element, set its fill-opacity to 1.0 */
        svg *:hover {
            fill-opacity: 1.0;
        }
    </style>

    <script src="jquery-1.10.2.js" type="text/javascript"></script>

    <script type="text/javascript">

        // Global variables, for convenience.
        var svgNS = "http://www.w3.org/2000/svg";   // Namespace for all SVG elements.
        var svgPanelWidth, svgPanelHeight;          // Width and height of the <svg> element.


        // Initialization - initialize global variables, and set up mouse event handlers.
        function init() {

            // Get the width and height of the <svg> element (the id of the <svg> element is svgPanel).
            svgPanelWidth  = $("#svgPanel").attr("width");
            svgPanelHeight = $("#svgPanel").attr("height");

            // Handle the mouseup event for any elements inside an <svg> element.
            //  - If the SHIFT and CTRL keys are depressed, delete the current shape. 
            //  - Otherwise, toggle the stroke and stroke-width attributes.
            $("svg *").live("mouseup", function (e) {
                if (e.shiftKey && e.ctrlKey) {
                    $(this).remove();
                }
                else {
                    var stroke = $(this).attr("stroke");
                    if (stroke) {
                        $(this).removeAttr("stroke");
                        $(this).removeAttr("stroke-width");
                    } else {
                        $(this).attr("stroke", "red");
                        $(this).attr("stroke-width", 5);
                    }
                }
            });
        }


        // Add a <rect> element to the <svg> element, with random location, fill colour, and opacity.
        function addRect() {

            // Create a new <rect> element, with the correct SVG namespace.
            var rect = document.createElementNS(svgNS, "rect");

            // Set the x, y, width, height, fill, and fill-opacity attributes on the <rect> element.
            var attrs = getRandomAttributes();
            rect.setAttribute("x", attrs.x);
            rect.setAttribute("y", attrs.y);
            rect.setAttribute("width", attrs.w);
            rect.setAttribute("height", attrs.h);
            rect.setAttribute("fill", "rgb(" + attrs.r + "," + attrs.g + "," + attrs.b + ")");
            rect.setAttribute("fill-opacity", attrs.o);

            // Append the <rect> element as a child of the <svg> element.
            $("svg").append(rect);
        }


        // Add a <circle> element to the <svg> element, with random centre-point, radius, fill colour, and opacity.
        function addCircle() {

            // Create a new <circle> element, with the correct SVG namespace.
            var circle = document.createElementNS(svgNS, "circle");

            // Set the cx, cy, r, fill, and fill-opacity attributes on the <circle> element.
            var attrs = getRandomAttributes();
            circle.setAttribute("cx", attrs.x);
            circle.setAttribute("cy", attrs.y);
            circle.setAttribute("r",  attrs.w / 2);
            circle.setAttribute("fill", "rgb(" + attrs.r + "," + attrs.g + "," + attrs.b + ")");
            circle.setAttribute("fill-opacity", attrs.o);

            // Append the <circle> element as a child of the <svg> element.
            $("svg").append(circle);
        }


        // Double the width and height of all the <rect> elements. 
        function growRects() {
            $("rect").each(function () {
                var w = $(this).attr("width");
                w *= 2;
                $(this).attr("width", w);

                var h = $(this).attr("height");
                h *= 2;
                $(this).attr("height", h);
            });
        }


        // Halve the width and height of all the <rect> elements. 
        function shrinkRects() {
            $("rect").each(function () {
                var w = $(this).attr("width");
                w /= 2;
                $(this).attr("width", w);

                var h = $(this).attr("height");
                h /= 2;
                $(this).attr("height", h);
            });
        }


        // Scale-up all elements inside the <svg> element, by wrapping each element in a <g transform='scale(2.0)'> element.
        function scaleUpAll() {
            $("svg *:not(g)").each(function () {
                var g = document.createElementNS(svgNS, "g");
                g.setAttribute("transform", "scale(2.0)");
                $(this).wrap(g);
            });
        }


        // Scale-down all elements inside the <svg> element, by wrapping each element in a <g transform='scale(0.5)'> element.
        function scaleDownAll() {
            $("svg *:not(g)").each(function () {
                var g = document.createElementNS(svgNS, "g");
                g.setAttribute("transform", "scale(0.5)");
                $(this).wrap(g);
            });
        }


        // Helper function, returns an object with random properties representing location, colour, and opacity.
        // Add a <polygon> element to the <svg> element, with random points, fill colour, and opacity.
        function addPolygon() {

            // Create a new <polygon> element, with the correct SVG namespace.
            var polygon = document.createElementNS(svgNS, "polygon");

            // Choose a random number of points (e.g. between 3 and 10).
            var numPoints = getRandomInt(3, 10);
            var angleDelta = 2 * Math.PI / numPoints;

            // Create a string that represents all the points in the polygon, centred on an x, y point.
            var attrs = getRandomAttributes();
            var pointsStr = "";
            for (var p = 0, angle = 0; p < numPoints; p++, angle += angleDelta) {
                var x = attrs.x + attrs.w * Math.cos(angle);
                var y = attrs.y + attrs.h * Math.sin(angle);

                pointsStr += x + " " + y;
                if (p != numPoints - 1)
                    pointsStr += ","
            }

            // Set the points, fill, and fill-opacity attributes on the <polygon> element.
            polygon.setAttribute("points", pointsStr);
            polygon.setAttribute("fill", "rgb(" + attrs.r + "," + attrs.g + "," + attrs.b + ")");
            polygon.setAttribute("fill-opacity", attrs.o);

            // Append the <polygon> element as a child of the <svg> element.
            $("svg").append(polygon);
        }


        function getRandomAttributes() {
            return {
                x: getRandomInt(0, svgPanelWidth / 2),   // Random x coordinate.
                y: getRandomInt(0, svgPanelHeight / 2),  // Random y coordinate. 
                w: getRandomInt(50, svgPanelWidth / 2),  // Random width.
                h: getRandomInt(50, svgPanelHeight / 2), // Random height.
                r: getRandomInt(0, 255),                 // Random redness.
                g: getRandomInt(0, 255),                 // Random greenness.
                b: getRandomInt(0, 255),                 // Random blueness.
                o: Math.random()                         // Random opacity.
            };
        }


        // Another helper function, returns a single random number in the range (min, max).
        function getRandomInt(min, max) {
            return min + Math.floor(Math.random() * (max - min + 1));
        }

    </script>

</head>

<body onload="init()">

    <h1>Fun with SVG!</h1>
  
    <svg xmlns="http://www.w3.org/2000/svg" id="svgPanel" width="900" height="500"></svg>

    <button onclick="addRect()">Add Rectangle</button>
    <button onclick="addCircle()">Add Circle</button> 
    <button onclick="addPolygon()">Add Polygon</button> 
    &nbsp;&nbsp;&nbsp;&nbsp;

    <button onclick="growRects()">Grow Rectangles</button>
    <button onclick="shrinkRects()">Shrink Rectangles</button>
    &nbsp;&nbsp;&nbsp;&nbsp;

    <button onclick="scaleUpAll()">Scale Up All</button>
    <button onclick="scaleDownAll()">Scale Down All</button>

</body>
</html>